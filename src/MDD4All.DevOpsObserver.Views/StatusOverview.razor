@using MDD4All.DevOpsObserver.ViewModels
<div class="main-title m-5">
    <h2>DevOps Observer</h2>
    <div class="main-grid">
        <div class="traffic-light-item">
            <TrafficLight DataContext="@DataContext.OverallStatus" />
        </div>

        <div class="status-item">
            <div class="status-display">
                <h3>Aggregated status: @DataContext.OverallStatus.Status.StatusValue</h3>
                @if (DataContext.LastDataRefresh != null)
                {
                    <h5>Last refresh: @DataContext.LastDataRefresh</h5>
                }
            </div>
            @if (DataContext.RefreshingStatus)
            {
                <h3>Refreshing status...</h3>
            }
        </div>

        <div class="results-item">
            <h4>Results</h4>
            <ul class="horizontal">
                @foreach (StatusViewModel statusViewModel in DataContext.StatusViewModels)
                {

                    <li>
                        <DevOpsStatusCard DataContext="@statusViewModel" />
                    </li>

                }
            </ul>
        </div>

    </div>
</div>